openapi: 3.0.0
info:
  title: shared/awx_job_template.proto
  version: version not set
tags:
  - name: JobTemplateService
paths:
  /api/v2/job_templates:
    get:
      summary: ListJobTemplates retrieves a paginated list of job templates.
      description: >-
        Returns only job templates the caller has permission to view based on
        RBAC.

        Supports filtering by name, organization, and search across multiple fields.
      operationId: JobTemplateService_ListJobTemplates
      responses:
        "200":
          description: A successful response.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/v1ListJobTemplatesResponse"
        default:
          description: An unexpected error response.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/rpcStatus"
      parameters:
        - name: page
          description: |-
            Page number for pagination, starting from 1.
            Example: 1
          in: query
          required: false
          schema:
            type: integer
            format: int32
        - name: pageSize
          description: |-
            Number of results per page. Default: 25, Maximum: 200.
            Example: 25
          in: query
          required: false
          schema:
            type: integer
            format: int32
        - name: name
          description: |-
            Filter by exact name match.
            Example: "Deploy Web Servers"
          in: query
          required: false
          schema:
            type: string
        - name: organizationId
          description: |-
            Filter by organization ID.
            Example: 1
          in: query
          required: false
          schema:
            type: integer
            format: int32
        - name: search
          description: |-
            Search across name, description fields.
            Example: "web"
          in: query
          required: false
          schema:
            type: string
        - name: orderBy
          description: |-
            Order results by field. Prefix with - for descending.
            Example: "-created" or "name"
          in: query
          required: false
          schema:
            type: string
      tags:
        - JobTemplateService
  "/api/v2/job_templates/{id}":
    get:
      summary: GetJobTemplate retrieves a single job template by ID.
      description: >-
        Returns the complete job template configuration including project,
        inventory,

        and playbook settings. Requires 'view' permission on the job template.
      operationId: JobTemplateService_GetJobTemplate
      responses:
        "200":
          description: A successful response.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/v1JobTemplate"
        default:
          description: An unexpected error response.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/rpcStatus"
      parameters:
        - name: id
          description: |-
            Job template ID to retrieve.
            Example: 7
          in: path
          required: true
          schema:
            type: integer
            format: int32
      tags:
        - JobTemplateService
  "/api/v2/job_templates/{id}/launch":
    post:
      summary: LaunchJobTemplate launches a job from the template.
      description: >-
        Creates a new job instance and queues it for execution. This is the
        primary

        way to run automation in AWX/Controller. Requires 'execute' permission.

        Returns immediately with the created job - use job status API to monitor progress.
      operationId: JobTemplateService_LaunchJobTemplate
      responses:
        "200":
          description: A successful response.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/v1Job"
        default:
          description: An unexpected error response.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/rpcStatus"
      parameters:
        - name: id
          description: |-
            ID of the job template to launch.
            Required. Example: 7
          in: path
          required: true
          schema:
            type: integer
            format: int32
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/JobTemplateServiceLaunchJobTemplateBody"
        required: true
      tags:
        - JobTemplateService
components:
  schemas:
    JobTemplateServiceLaunchJobTemplateBody:
      type: object
      properties:
        inventoryId:
          type: integer
          format: int32
          title: |-
            Override the default inventory for this job run.
            Only works if ask_inventory_on_launch is true.
            Example: 10
        limit:
          type: string
          title: |-
            Override the limit pattern for this job run.
            Only works if ask_limit_on_launch is true.
            Example: "webservers:&production"
        extraVars:
          type: string
          title: |-
            Override extra variables for this job run.
            JSON string of variable overrides.
            Example: "{\"env\": \"production\", \"debug\": false}"
        tags:
          type: string
          title: Override tags to run
        skipTags:
          type: string
          title: Override tags to skip
      description: >-
        LaunchJobTemplateRequest specifies parameters for launching a job.


        Launches a new job from the template with optional runtime overrides.

        Any prompt-on-launch fields configured in the template can be overridden here.
    protobufAny:
      type: object
      properties:
        "@type":
          type: string
      additionalProperties: {}
    rpcStatus:
      type: object
      properties:
        code:
          type: integer
          format: int32
        message:
          type: string
        details:
          type: array
          items:
            $ref: "#/components/schemas/protobufAny"
    v1Job:
      type: object
      properties:
        id:
          type: integer
          format: int32
          title: |-
            Unique identifier for this job instance.
            Example: 42
        name:
          type: string
          title: |-
            Name inherited from the job template.
            Example: "Deploy Web Servers"
        status:
          type: string
          title: >-
            Current job status.

            Values: "pending", "waiting", "running", "successful", "failed", "error", "cancelled"

            Example: "pending"
        jobTemplateId:
          type: integer
          format: int32
          title: |-
            ID of the job template this was launched from.
            Example: 7
        created:
          type: string
          title: |-
            ISO 8601 timestamp when job was created/queued.
            Example: "2025-11-11T14:00:00Z"
        started:
          type: string
          title: |-
            ISO 8601 timestamp when job started executing.
            Null if not started yet.
            Example: "2025-11-11T14:01:00Z"
        finished:
          type: string
          title: |-
            ISO 8601 timestamp when job finished.
            Null if still running.
            Example: "2025-11-11T14:05:30Z"
        stdoutUrl:
          type: string
          title: |-
            URL to view real-time job output.
            Example: "/api/v2/jobs/42/stdout/"
      description: |-
        Job represents a running or completed job instance.

        Jobs are created when job templates are launched and represent
        the actual execution of automation with real-time status.
    v1JobTemplate:
      type: object
      properties:
        id:
          type: integer
          format: int32
          title: |-
            Unique identifier for the job template.
            Example: 7
        name:
          type: string
          title: |-
            Human-readable name for the template.
            Must be unique within the organization.
            Example: "Deploy Web Servers"
        description:
          type: string
          title: |-
            Optional description explaining the template's purpose.
            Example: "Deploys Apache web servers to production"
        jobType:
          type: string
          title: >-
            Type of job to run: "run" (normal execution) or "check" (dry-run
            mode).

            Example: "run"
        projectId:
          type: integer
          format: int32
          title: |-
            ID of the project containing the playbook source code.
            Example: 5
        inventoryId:
          type: integer
          format: int32
          title: |-
            ID of the inventory defining target hosts.
            Example: 3
        playbook:
          type: string
          title: |-
            Name of the playbook file within the project to execute.
            Example: "site.yml" or "playbooks/deploy.yml"
        organizationId:
          type: integer
          format: int32
          title: |-
            Organization that owns this job template.
            Example: 1
        status:
          type: string
          title: >-
            Current status of the job template.

            Values: "never updated", "ok", "successful", "failed", "error", "cancelled"

            Based on the most recent job execution.

            Example: "successful"
        created:
          type: string
          title: |-
            ISO 8601 timestamp when created.
            Example: "2025-01-15T10:00:00Z"
        modified:
          type: string
          title: |-
            ISO 8601 timestamp when last modified.
            Example: "2025-10-29T14:30:00Z"
        verbosity:
          type: integer
          format: int32
          title: |-
            Ansible verbosity level (0-5).
            0=normal, 1=-v, 2=-vv, 3=-vvv, 4=-vvvv, 5=-vvvvv
            Example: 0
        forks:
          type: integer
          format: int32
          title: Number of parallel processes
        timeout:
          type: integer
          format: int32
          title: |-
            Job timeout in seconds. 0 means no timeout.
            Example: 0
        limit:
          type: string
          title: Pattern of hosts to target
        becomeEnabled:
          type: boolean
          title: |-
            Whether to enable become/sudo privilege escalation.
            Example: false
        diffMode:
          type: boolean
          title: |-
            Whether to show diff output for changed files.
            Example: false
        allowSimultaneous:
          type: boolean
          title: >-
            Whether to allow multiple jobs from this template to run
            simultaneously.

            Example: false
      description: >-
        JobTemplate represents a reusable definition for running Ansible
        playbooks.


        Job templates combine a project (source code), inventory (target hosts),

        credentials (access), and playbook into a reusable automation definition.

        They are the core abstraction for automation execution in AWX/Controller.
    v1ListJobTemplatesResponse:
      type: object
      properties:
        count:
          type: integer
          format: int32
          title: |-
            Total count of job templates matching filters.
            Example: 42
        next:
          type: string
          title: |-
            URL to next page or empty string if last page.
            Example: "/api/v2/job_templates/?page=2"
        previous:
          type: string
          title: |-
            URL to previous page or empty string if first page.
            Example: ""
        results:
          type: array
          items:
            $ref: "#/components/schemas/v1JobTemplate"
          description: Array of job template objects for current page.
      description: ListJobTemplatesResponse contains paginated job templates.
