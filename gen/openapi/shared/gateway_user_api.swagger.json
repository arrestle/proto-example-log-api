{
  "swagger": "2.0",
  "info": {
    "title": "shared/gateway_user_api.proto",
    "version": "version not set"
  },
  "tags": [
    {
      "name": "UserService"
    }
  ],
  "consumes": [
    "application/json"
  ],
  "produces": [
    "application/json"
  ],
  "paths": {
    "/api/gateway/v1/users": {
      "get": {
        "summary": "ListUsers retrieves a paginated list of users with optional filtering.",
        "description": "Supports filtering by username, email, and search across multiple fields.\nResults are paginated with configurable page size. Requires authentication\nand returns only users visible to the caller based on RBAC permissions.",
        "operationId": "UserService_ListUsers",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/v1ListUsersResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "page",
            "description": "Page number for pagination, starting from 1.\nExample: 1 (first page), 2 (second page)",
            "in": "query",
            "required": false,
            "type": "integer",
            "format": "int32"
          },
          {
            "name": "pageSize",
            "description": "Number of results per page. Default: 25, Maximum: 200.\nExample: 25",
            "in": "query",
            "required": false,
            "type": "integer",
            "format": "int32"
          },
          {
            "name": "search",
            "description": "Search string to filter users across username, first_name, last_name, and email fields.\nCase-insensitive partial matching.\nExample: \"alice\" matches \"alice\", \"Alice Smith\", \"alice@example.com\"",
            "in": "query",
            "required": false,
            "type": "string"
          }
        ],
        "tags": [
          "UserService"
        ]
      },
      "post": {
        "summary": "CreateUser creates a new user account in AAP Gateway.",
        "description": "Creates a new user with the specified credentials and profile information.\nRequires superuser privileges. Username must be unique. Password must meet\nconfigured complexity requirements.",
        "operationId": "UserService_CreateUser",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/v1User"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "description": "CreateUserRequest specifies the required and optional fields for creating a new user account.",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/v1CreateUserRequest"
            }
          }
        ],
        "tags": [
          "UserService"
        ]
      }
    },
    "/api/gateway/v1/users/{id}": {
      "get": {
        "summary": "GetUser retrieves a single user account by their unique ID.",
        "description": "Returns the complete user record including username, email, and role information.\nRequires authentication. Returns NOT_FOUND if user doesn't exist or caller\nlacks permission to view the user.",
        "operationId": "UserService_GetUser",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/v1User"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "id",
            "description": "Numeric user ID to retrieve. Must be a valid user ID that exists in the system.\nExample: 123",
            "in": "path",
            "required": true,
            "type": "integer",
            "format": "int32"
          }
        ],
        "tags": [
          "UserService"
        ]
      }
    }
  },
  "definitions": {
    "protobufAny": {
      "type": "object",
      "properties": {
        "@type": {
          "type": "string"
        }
      },
      "additionalProperties": {}
    },
    "rpcStatus": {
      "type": "object",
      "properties": {
        "code": {
          "type": "integer",
          "format": "int32"
        },
        "message": {
          "type": "string"
        },
        "details": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/protobufAny"
          }
        }
      }
    },
    "v1CreateUserRequest": {
      "type": "object",
      "properties": {
        "username": {
          "type": "string",
          "title": "Username for the new user. Must be unique and not already exist.\nRequired. Example: \"bob\""
        },
        "password": {
          "type": "string",
          "title": "Password for local authentication. Must meet configured complexity requirements.\nRequired for local users. Example: \"SecureP@ssw0rd123\""
        },
        "email": {
          "type": "string",
          "title": "Email address for the user. Used for notifications and account recovery.\nOptional. Example: \"bob@example.com\""
        },
        "firstName": {
          "type": "string",
          "title": "First/given name for display.\nOptional. Example: \"Bob\""
        },
        "lastName": {
          "type": "string",
          "title": "Last/family name for display.\nOptional. Example: \"Johnson\""
        }
      },
      "description": "CreateUserRequest specifies the required and optional fields for creating a new user account."
    },
    "v1ListUsersResponse": {
      "type": "object",
      "properties": {
        "count": {
          "type": "integer",
          "format": "int32",
          "title": "Total count of users matching the filter criteria (across all pages).\nExample: 42"
        },
        "next": {
          "type": "string",
          "title": "URL to the next page of results, or empty string if this is the last page.\nExample: \"/api/gateway/v1/users/?page=2\""
        },
        "previous": {
          "type": "string",
          "title": "URL to the previous page of results, or empty string if this is the first page.\nExample: \"\""
        },
        "results": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/v1User"
          },
          "description": "Array of User objects for the current page."
        }
      },
      "description": "ListUsersResponse contains a paginated list of users matching the query."
    },
    "v1User": {
      "type": "object",
      "properties": {
        "id": {
          "type": "integer",
          "format": "int32",
          "title": "Unique numeric identifier for the user. Auto-generated on creation.\nExample: 123"
        },
        "username": {
          "type": "string",
          "title": "Username for login and identification. Must be unique across all users.\nTypically lowercase alphanumeric with underscores or hyphens.\nExample: \"alice\" or \"bob_admin\""
        },
        "email": {
          "type": "string",
          "title": "Email address for the user. Used for notifications and password recovery.\nMust be a valid email format.\nExample: \"alice@example.com\""
        },
        "firstName": {
          "type": "string",
          "title": "User's first/given name for display purposes.\nExample: \"Alice\""
        },
        "lastName": {
          "type": "string",
          "title": "User's last/family name for display purposes.\nExample: \"Smith\""
        },
        "isSuperuser": {
          "type": "boolean",
          "title": "Whether this user has superuser privileges (all permissions).\nSuperusers can perform any action including user management and system configuration.\nExample: false (most users), true (system administrators)"
        },
        "created": {
          "type": "string",
          "title": "ISO 8601 timestamp when the user account was created.\nRead-only, set automatically on creation.\nExample: \"2025-10-29T10:00:00Z\""
        },
        "modified": {
          "type": "string",
          "title": "ISO 8601 timestamp when the user account was last modified.\nRead-only, updated automatically on any change.\nExample: \"2025-10-29T12:30:00Z\""
        }
      },
      "description": "User represents an AAP Gateway user account.\n\nUsers are the primary authentication and authorization entities in AAP.\nEach user can be associated with multiple authenticators (LDAP, SAML, local, etc.)\nand can be granted permissions through role-based access control (RBAC)."
    }
  }
}
